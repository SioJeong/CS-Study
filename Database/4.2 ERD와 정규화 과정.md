# ERD와 정규화 과정

## 📌 면접 예상 질문

<details>
  <summary>Q1. 데이터정규화의 개념과 각 단계에 대해서 설명해주세요.</summary>
  <br />
  <p>데이터 정규화는 데이터베이스에서 이상 현상을 방지하고 저장 공간을 효율적으로 사용하기 위해 릴레이션을 여러 개로 분해하는 과정입니다. 정규화 과정은 단계적으로 진행되며, 각 단계에서 데이터 중복을 줄이고 데이터 무결성을 유지하는 것이 목표입니다.</p>
  
- 제1정규형: 모든 속성이 원자 값을 가져야 하며, 하나의 속성에 여러 개의 값이 포함되지 않도록 분해합니다.
- 제2정규형: 제1정규형을 만족하고, 기본키가 아닌 속성이 기본키에 완전 함수 종속이도록 분해합니다.
- 제3정규형: 제2정규형을 만족하고, 이행적 종속을 제거하도록 분해합니다.
- 보이스-코드 정규형: 제3정규형을 만족하고, 모든 결정자가 후보키가 되도록 정리하여, 데이터 종속성을 더욱 엄격하게 관리합니다.
</details>

<details>
  <summary>Q2. 정규화를 진행하면 항상 성능이 좋아지나요?</summary>
  <br />
  <p>아니요, 정규화를 한다고 해서 성능이 무조건 좋아지는 것은 아닙니다. 정규화를 통해 데이터 중복을 줄이고 무결성을 높일 수 있지만, 릴레이션 분해로 인해 릴레이션 간 JOIN 연산이 증가하여 조회 성능이 저하될 수 있습니다.</p>
</details>

<details>
  <summary>(보충) Q3. 정규화의 이상현상에 대해 설명해주세요.</summary>
  <br />
  <p>정규화의 이상 현상은 테이블을 설계할 때 잘못 설계하여 데이터를 삽입,삭제,수정할 때 생기는 논리적 오류를 말합니다. 정규화의 이상현상으로는</p>
  
- 삽입 이상: 자료를 삽입할 때 특정 속성에 해당하는 값이 없어 NULL을 입력해야 하는 현상
- 갱신 이상: 중복된 데이터 중 일부만 수정되어 데이터 모순이 일어나는 현상
- 삭제 이상: 한 정보를 삭제할 때, 연관된 중요한 데이터까지 함께 삭제되어 버리는 현상이 있습니다.
 
</details>

## 📌 내용 정리

### 1. ERD의 특징
- ERD란?
> ERD는 릴레이션 간의 관계들을 정의한 것. 시스템의 요구 사항을 기반으로 작성되며 이 ERD를 기반으로 DB를 구축하여 DB의 뼈대 역할을 수행하게 됨. 디버깅 또는 프로세스 재설계가 필요한 경우 설계도 역할을 담당

- ERD의 단점
> 관계형 구조로 표현할 수 있는 데이터를 구성하는 데에는 유용할 수 있지만, 비정형 데이터의 경우에는 충분히 표현할 수 없음

---

### 2.0 정규화 과정
- 정규화 과정이란?
> 릴레이션 간의 잘못된 종속 관계로 인해 발생한 DB 이상 현상을 해결하기 위해 or 저장 공간을 효율적으로 사용하기 위해 **릴레이션을 여러 개로 분리하는 과정**
<br />
정규화 과정은 정규형 원칙을 기반으로 정규형을 만들어가는 과정, 정규화된 정도는 정규화(NF, Formal Form)으로 표현
<br />

- 정규형 원칙
1) 좀 더 좋은 구조로 만들기
2) 자료의 중복성은 감소해야함
3) 독립적인 관계는 별개의 릴레이션으로 표현
4) 각각의 릴레이션은 독립적인 표현이 가능해야함

- cf. 정규형의 종류
	1) 기본 정규형: 제1정규형, 제2정규형, 제3정규형, 보이스/코드 정규형
    2) 고급 정규형: 제4정규형, 제5정규형
    
- 정규화와 성능 개선
> 정규화 과정을 거쳐 테이블을 나눈다고 해서 성능이 100% 좋아지는 것은 아님. 성능이 좋아질 수도, 나빠질 수도 있음. 테이블을 나누게 되면 어떠한 쿼리는 조인을 해야 하는 경우가 발생하여 오히려 느려질 수도 있기 때문에 서비스에 따라 정규화 또는 비정규화 과정을 진행해야 함
    
### 2.1 제1정규형, 1NF
> 의미: 릴레이션의 모든 도메인이 **더 이상 분해될 수 없는 원자 값**으로 구성되어야 함

> 조건: 릴레이션의 속성 값 중에서 한 개의 기본키에 대해 두 개 이상의 값을 가지는 반복 집합이 있어서는 안됨. 만약 반복 집합이 존재한다면 제거해야함

![](https://velog.velcdn.com/images/chtoqur/post/a168b535-9e3b-485f-ac1e-b31bae597467/image.png)

### 2.2 제2정규형, 2NF
> 의미: 릴레이션이 제1정규형이며 부분 함수의 종속성을 제거하여 완전 함수 종속적인 형태.
- 부분 함수의 종속성 제거란 기본키가 아닌 모든 속성이 기본키에 완전 함수 종속적인 것
- 완전 함수 종속: 기본키의 부분집합이 결정자가 되어선 안된다는 것

> 주의사항
- 릴레이션을 분해할 때 **동등한 릴레이션으로 분해**해야 함
- 정보 손실이 발생하지 않는 **무손실 분해**로 분해되어야 함

![](https://velog.velcdn.com/images/chtoqur/post/bf8e3f0a-a920-4517-9b80-28952f46a35b/image.png)

### 2.3 제3정규형, 3NF
> 의미: 제2정규형이며 기본키가 아닌 모든 속성이 **이행적 함수 종속을 만족하지 않는** 상태
- 이행적 함수 종속: 속성이 A→B이고, B→C이면서 A→C의 관계에 있는 것

![](https://velog.velcdn.com/images/chtoqur/post/97cca352-8192-4d05-8bb0-ec372b55f11d/image.png)


### 2.4 보이스/코드 정규형, BCNF
> 의미: 제3정규형이며, 결정자가 후보키가 아닌 함수 종속 관계를 제거하여 릴레이션의 함수 종속 관계에서 **모든 결정자가 후보키**인 상태
- 결정자: 함수 종속 관계에서 특정 종속자를 결정짓는 요소
X->Y일 때 X는 결정자, Y는 종속자

![](https://velog.velcdn.com/images/chtoqur/post/421f88e0-f158-4361-a531-a3df2bbde6ea/image.png)